/*! For license information please see components-logh-StarGrid-stories.0cadbe0b.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkopen_sam_front=self.webpackChunkopen_sam_front||[]).push([[451],{"./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js":(__unused_webpack_module,exports,__webpack_require__)=>{var React=__webpack_require__("./node_modules/react/index.js");var objectIs="function"==typeof Object.is?Object.is:function is(x,y){return x===y&&(0!==x||1/x==1/y)||x!=x&&y!=y},useState=React.useState,useEffect=React.useEffect,useLayoutEffect=React.useLayoutEffect,useDebugValue=React.useDebugValue;function checkIfSnapshotChanged(inst){var latestGetSnapshot=inst.getSnapshot;inst=inst.value;try{var nextValue=latestGetSnapshot();return!objectIs(inst,nextValue)}catch(error){return!0}}var shim="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function useSyncExternalStore$1(subscribe,getSnapshot){return getSnapshot()}:function useSyncExternalStore$2(subscribe,getSnapshot){var value=getSnapshot(),_useState=useState({inst:{value,getSnapshot}}),inst=_useState[0].inst,forceUpdate=_useState[1];return useLayoutEffect(function(){inst.value=value,inst.getSnapshot=getSnapshot,checkIfSnapshotChanged(inst)&&forceUpdate({inst})},[subscribe,value,getSnapshot]),useEffect(function(){return checkIfSnapshotChanged(inst)&&forceUpdate({inst}),subscribe(function(){checkIfSnapshotChanged(inst)&&forceUpdate({inst})})},[subscribe]),useDebugValue(value),value};exports.useSyncExternalStore=void 0!==React.useSyncExternalStore?React.useSyncExternalStore:shim},"./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js":(__unused_webpack_module,exports,__webpack_require__)=>{var React=__webpack_require__("./node_modules/react/index.js"),shim=__webpack_require__("./node_modules/use-sync-external-store/shim/index.js");var objectIs="function"==typeof Object.is?Object.is:function is(x,y){return x===y&&(0!==x||1/x==1/y)||x!=x&&y!=y},useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;exports.useSyncExternalStoreWithSelector=function(subscribe,getSnapshot,getServerSnapshot,selector,isEqual){var instRef=useRef(null);if(null===instRef.current){var inst={hasValue:!1,value:null};instRef.current=inst}else inst=instRef.current;instRef=useMemo(function(){function memoizedSelector(nextSnapshot){if(!hasMemo){if(hasMemo=!0,memoizedSnapshot=nextSnapshot,nextSnapshot=selector(nextSnapshot),void 0!==isEqual&&inst.hasValue){var currentSelection=inst.value;if(isEqual(currentSelection,nextSnapshot))return memoizedSelection=currentSelection}return memoizedSelection=nextSnapshot}if(currentSelection=memoizedSelection,objectIs(memoizedSnapshot,nextSnapshot))return currentSelection;var nextSelection=selector(nextSnapshot);return void 0!==isEqual&&isEqual(currentSelection,nextSelection)?(memoizedSnapshot=nextSnapshot,currentSelection):(memoizedSnapshot=nextSnapshot,memoizedSelection=nextSelection)}var memoizedSnapshot,memoizedSelection,hasMemo=!1,maybeGetServerSnapshot=void 0===getServerSnapshot?null:getServerSnapshot;return[function(){return memoizedSelector(getSnapshot())},null===maybeGetServerSnapshot?void 0:function(){return memoizedSelector(maybeGetServerSnapshot())}]},[getSnapshot,getServerSnapshot,selector,isEqual]);var value=useSyncExternalStore(subscribe,instRef[0],instRef[1]);return useEffect(function(){inst.hasValue=!0,inst.value=value},[value]),useDebugValue(value),value}},"./node_modules/use-sync-external-store/shim/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js")},"./node_modules/use-sync-external-store/shim/with-selector.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js")},"./node_modules/zustand/esm/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{vt:()=>create});const createStoreImpl=createState=>{let state;const listeners=new Set,setState=(partial,replace)=>{const nextState="function"==typeof partial?partial(state):partial;if(!Object.is(nextState,state)){const previousState=state;state=(null!=replace?replace:"object"!=typeof nextState||null===nextState)?nextState:Object.assign({},state,nextState),listeners.forEach(listener=>listener(state,previousState))}},getState=()=>state,api={setState,getState,getInitialState:()=>initialState,subscribe:listener=>(listeners.add(listener),()=>listeners.delete(listener)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),listeners.clear()}},initialState=state=createState(setState,getState,api);return api},createStore=createState=>createState?createStoreImpl(createState):createStoreImpl;var react=__webpack_require__("./node_modules/react/index.js"),with_selector=__webpack_require__("./node_modules/use-sync-external-store/shim/with-selector.js");const{useDebugValue}=react,{useSyncExternalStoreWithSelector}=with_selector;let didWarnAboutEqualityFn=!1;const identity=arg=>arg;const createImpl=createState=>{"function"!=typeof createState&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const api="function"==typeof createState?createStore(createState):createState,useBoundStore=(selector,equalityFn)=>function useStore(api,selector=identity,equalityFn){equalityFn&&!didWarnAboutEqualityFn&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),didWarnAboutEqualityFn=!0);const slice=useSyncExternalStoreWithSelector(api.subscribe,api.getState,api.getServerState||api.getInitialState,selector,equalityFn);return useDebugValue(slice),slice}(api,selector,equalityFn);return Object.assign(useBoundStore,api),useBoundStore},create=createState=>createState?createImpl(createState):createImpl},"./src/components/logh/StarGrid.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,DenseGalaxy:()=>DenseGalaxy,EmptyGrid:()=>EmptyGrid,FocusedBattle:()=>FocusedBattle,ZoomedIn:()=>ZoomedIn,ZoomedOut:()=>ZoomedOut,__namedExportsOrder:()=>__namedExportsOrder,default:()=>StarGrid_stories});var react=__webpack_require__("./node_modules/react/index.js"),gameStore=__webpack_require__("./src/stores/gameStore.ts");function StarGrid(){const canvasRef=(0,react.useRef)(null),containerRef=(0,react.useRef)(null),{viewport,setViewport,selectGrid,starSystems,fleets,loadGalaxyData,isLoadingGalaxy,galaxyError}=(0,gameStore.T)(),[isDragging,setIsDragging]=(0,react.useState)(!1),[lastPos,setLastPos]=(0,react.useState)({x:0,y:0}),[gridUnitCounts,setGridUnitCounts]=(0,react.useState)(new Map),calculateGridUnits=(0,react.useCallback)(()=>{const counts=new Map;fleets.forEach(fleet=>{const key=`${fleet.gridX},${fleet.gridY}`,current=counts.get(key)||{empire:0,alliance:0},units=Math.ceil(fleet.size/300);"empire"===fleet.faction?current.empire+=units:"alliance"===fleet.faction&&(current.alliance+=units),counts.set(key,current)}),setGridUnitCounts(counts)},[fleets]);(0,react.useEffect)(()=>{const sessionId="undefined"!=typeof window?localStorage.getItem("logh_sessionId"):null;loadGalaxyData(sessionId||void 0)},[loadGalaxyData]),(0,react.useEffect)(()=>{calculateGridUnits()},[calculateGridUnits]),(0,react.useEffect)(()=>{const canvas=canvasRef.current;if(!canvas)return;const ctx=canvas.getContext("2d");if(!ctx)return;const parent=containerRef.current;parent&&(canvas.width=parent.clientWidth,canvas.height=parent.clientHeight),ctx.fillStyle="#050510",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.save(),ctx.translate(viewport.x,viewport.y),ctx.scale(viewport.zoom,viewport.zoom),ctx.strokeStyle="rgba(30, 144, 255, 0.1)",ctx.lineWidth=1;for(let x=0;x<=100;x++)ctx.beginPath(),ctx.moveTo(50*x,0),ctx.lineTo(50*x,5e3),ctx.stroke();for(let y=0;y<=100;y++)ctx.beginPath(),ctx.moveTo(0,50*y),ctx.lineTo(5e3,50*y),ctx.stroke();gridUnitCounts.forEach((counts,key)=>{const[gx,gy]=key.split(",").map(Number),x=50*gx,y=50*gy;(counts.empire>=300||counts.alliance>=300)&&(ctx.strokeStyle="rgba(255, 100, 100, 0.6)",ctx.lineWidth=2,ctx.strokeRect(x,y,50,50))}),starSystems.forEach(sys=>{const x=50*sys.gridX+25,y=50*sys.gridY+25;sys.faction&&"none"!==sys.faction&&(ctx.fillStyle="empire"===sys.faction?"rgba(192, 192, 192, 0.15)":"rgba(74, 93, 35, 0.15)",ctx.fillRect(50*sys.gridX,50*sys.gridY,50,50)),ctx.fillStyle="empire"===sys.faction?"#C0C0C0":"alliance"===sys.faction?"#4A5D23":"#888888",ctx.beginPath(),ctx.arc(x,y,8,0,2*Math.PI),ctx.fill(),ctx.fillStyle="#E0E0E0",ctx.font="10px monospace",ctx.textAlign="center",ctx.fillText(sys.name,x,y+15)}),fleets.forEach(fleet=>{const x=50*fleet.gridX+25+10,y=50*fleet.gridY+25-10;ctx.fillStyle="empire"===fleet.faction?"#FFFFFF":"alliance"===fleet.faction?"#87CEEB":"#888888",ctx.beginPath(),ctx.moveTo(x,y-6),ctx.lineTo(x+5,y+6),ctx.lineTo(x-5,y+6),ctx.fill(),ctx.fillStyle="#FFFFFF",ctx.font="8px monospace",ctx.fillText(fleet.commanderName,x,y-10)}),ctx.restore()},[viewport,starSystems,fleets,gridUnitCounts]);const handleMouseUp=()=>{setIsDragging(!1)};return react.createElement("div",{ref:containerRef,className:"w-full h-full overflow-hidden cursor-move relative bg-[#050510]",onMouseDown:e=>{setIsDragging(!0),setLastPos({x:e.clientX,y:e.clientY})},onMouseMove:e=>{if(isDragging){const dx=e.clientX-lastPos.x,dy=e.clientY-lastPos.y;setViewport(viewport.x+dx,viewport.y+dy),setLastPos({x:e.clientX,y:e.clientY})}},onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onWheel:e=>{const scaleAmount=.001*-e.deltaY,newZoom=Math.max(.1,Math.min(5,viewport.zoom+scaleAmount));setViewport(viewport.x,viewport.y,newZoom)},onClick:e=>{if(isDragging)return;const rect=canvasRef.current?.getBoundingClientRect();if(!rect)return;const clickX=(e.clientX-rect.left-viewport.x)/viewport.zoom,clickY=(e.clientY-rect.top-viewport.y)/viewport.zoom,gridX=Math.floor(clickX/50),gridY=Math.floor(clickY/50);selectGrid(gridX,gridY)}},isLoadingGalaxy&&react.createElement("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 z-10"},react.createElement("div",{className:"text-[#1E90FF] text-sm font-mono"},"Loading Galaxy Data...")),galaxyError&&react.createElement("div",{className:"absolute top-16 left-1/2 -translate-x-1/2 bg-red-900/80 text-white text-xs p-3 font-mono rounded z-10 max-w-md"},react.createElement("div",{className:"font-bold mb-1"},"Galaxy Data Error"),react.createElement("div",null,galaxyError),react.createElement("button",{onClick:()=>{const sessionId="undefined"!=typeof window?localStorage.getItem("logh_sessionId"):null;loadGalaxyData(sessionId||void 0)},className:"mt-2 px-3 py-1 bg-red-700 hover:bg-red-600 rounded text-xs"},"Retry")),react.createElement("canvas",{ref:canvasRef,className:"block","data-testid":"star-grid-canvas"}),react.createElement("div",{className:"absolute top-2 right-2 bg-black/50 text-[#1E90FF] text-xs p-2 font-mono pointer-events-none"},react.createElement("div",null,"Zoom: ",viewport.zoom.toFixed(2)," | Pos: ",viewport.x.toFixed(0),",",viewport.y.toFixed(0)),react.createElement("div",{className:"mt-1"},"Systems: ",starSystems.length," | Fleets: ",fleets.length)),Array.from(gridUnitCounts.entries()).some(([_,counts])=>counts.empire>=300||counts.alliance>=300)&&react.createElement("div",{className:"absolute bottom-2 left-2 bg-red-900/80 text-white text-xs p-2 font-mono rounded pointer-events-none"},"⚠️ 300-Unit Grid Limit Warning (Manual P.30)",Array.from(gridUnitCounts.entries()).filter(([_,counts])=>counts.empire>=300||counts.alliance>=300).map(([key,counts])=>{const[gx,gy]=key.split(",");return react.createElement("div",{key,className:"text-[10px] mt-1"},"Grid (",gx,",",gy,"): Empire=",counts.empire," Alliance=",counts.alliance)})))}const StarGrid_stories={title:"Logh/StarGrid",component:StarGrid,parameters:{layout:"fullscreen",docs:{description:{component:"StarGrid displays the galactic strategy map using a 100x100 light-year grid system. Players can pan (drag), zoom (scroll), and click to select grid coordinates. Star systems and fleets are rendered using Canvas API for performance."}}},decorators:[Story=>React.createElement("div",{className:"w-screen h-screen bg-[#050510] relative"},React.createElement(Story,null),React.createElement("div",{className:"absolute bottom-4 left-4 bg-black/70 text-white p-4 text-xs font-mono rounded border border-[#1E90FF] max-w-sm"},React.createElement("div",{className:"font-bold mb-2 text-[#1E90FF]"},"Controls"),React.createElement("ul",{className:"space-y-1 text-[#9CA3AF]"},React.createElement("li",null,"• Drag to pan the map"),React.createElement("li",null,"• Scroll to zoom in/out"),React.createElement("li",null,"• Click grid to select coordinates"),React.createElement("li",null,"• Silver circles = Empire star systems"),React.createElement("li",null,"• Olive circles = Alliance star systems"),React.createElement("li",null,"• White/blue triangles = Fleets"))))]},Default={parameters:{docs:{description:{story:"Default view with mock data loaded from gameStore. Shows Astarte (Alliance) and Odin (Empire) star systems with two fleets."}}}},EmptyGrid={render:()=>{const StarGridWrapper=()=>{const{starSystems,fleets}=(0,gameStore.T)();return(0,react.useEffect)(()=>(gameStore.T.setState({starSystems:[],fleets:[]}),()=>{gameStore.T.getState().loadMockData()}),[]),React.createElement(StarGrid,null)};return React.createElement(StarGridWrapper,null)},parameters:{docs:{description:{story:"Empty grid showing only the 100x100 coordinate system without any star systems or fleets."}}}},DenseGalaxy={render:()=>{const StarGridWrapper=()=>((0,react.useEffect)(()=>(gameStore.T.setState({starSystems:[{id:"s1",name:"Astarte",gridX:5,gridY:5,faction:"alliance",planets:[]},{id:"s2",name:"Odin",gridX:20,gridY:20,faction:"empire",planets:[]},{id:"s3",name:"Heinessen",gridX:10,gridY:8,faction:"alliance",planets:[]},{id:"s4",name:"Iserlohn",gridX:15,gridY:12,faction:"alliance",planets:[]},{id:"s5",name:"Phezzan",gridX:18,gridY:10,faction:"phezzan",planets:[]},{id:"s6",name:"Fezzan Corridor",gridX:16,gridY:11,faction:"none",planets:[]},{id:"s7",name:"Vermillion",gridX:22,gridY:18,faction:"empire",planets:[]},{id:"s8",name:"Dagon",gridX:12,gridY:15,faction:"alliance",planets:[]}],fleets:[{id:"f1",commanderName:"Yang Wen-li",faction:"alliance",gridX:5,gridY:5,size:15e3,status:"idle"},{id:"f2",commanderName:"Reinhard",faction:"empire",gridX:20,gridY:20,size:2e4,status:"idle"},{id:"f3",commanderName:"Merkatz",faction:"alliance",gridX:10,gridY:8,size:8e3,status:"moving"},{id:"f4",commanderName:"Bittenfeld",faction:"empire",gridX:22,gridY:18,size:12e3,status:"idle"},{id:"f5",commanderName:"Attenborough",faction:"alliance",gridX:15,gridY:12,size:5e3,status:"idle"}]}),()=>{gameStore.T.getState().loadMockData()}),[]),React.createElement(StarGrid,null));return React.createElement(StarGridWrapper,null)},parameters:{docs:{description:{story:"Dense galaxy with 8 star systems and 5 fleets. Tests rendering performance and visual clarity."}}}},ZoomedIn={render:()=>{const StarGridWrapper=()=>((0,react.useEffect)(()=>(gameStore.T.getState().loadMockData(),gameStore.T.setState({viewport:{x:-200,y:-200,zoom:2.5}}),()=>{gameStore.T.setState({viewport:{x:0,y:0,zoom:1}})}),[]),React.createElement(StarGrid,null));return React.createElement(StarGridWrapper,null)},parameters:{docs:{description:{story:"Zoomed-in view (2.5x) centered on Astarte system. Grid lines and labels should remain clear."}}}},ZoomedOut={render:()=>{const StarGridWrapper=()=>((0,react.useEffect)(()=>(gameStore.T.getState().loadMockData(),gameStore.T.setState({viewport:{x:400,y:400,zoom:.3}}),()=>{gameStore.T.setState({viewport:{x:0,y:0,zoom:1}})}),[]),React.createElement(StarGrid,null));return React.createElement(StarGridWrapper,null)},parameters:{docs:{description:{story:"Zoomed-out overview (0.3x) showing larger area of the galaxy. Good for strategic planning."}}}},FocusedBattle={render:()=>{const StarGridWrapper=()=>((0,react.useEffect)(()=>(gameStore.T.setState({starSystems:[{id:"s1",name:"Iserlohn",gridX:15,gridY:15,faction:"alliance",planets:[]}],fleets:[{id:"f1",commanderName:"Yang Wen-li",faction:"alliance",gridX:15,gridY:15,size:15e3,status:"battle"},{id:"f2",commanderName:"Reinhard",faction:"empire",gridX:16,gridY:15,size:2e4,status:"battle"},{id:"f3",commanderName:"Merkatz",faction:"alliance",gridX:14,gridY:16,size:8e3,status:"moving"}],viewport:{x:-600,y:-600,zoom:2},selectedGrid:{x:15,y:15}}),()=>{gameStore.T.getState().loadMockData(),gameStore.T.setState({viewport:{x:0,y:0,zoom:1},selectedGrid:null})}),[]),React.createElement(StarGrid,null));return React.createElement(StarGridWrapper,null)},parameters:{docs:{description:{story:"Battle scenario at Iserlohn Fortress with fleets in combat. Shows multiple fleets converging on a strategic location."}}}},__namedExportsOrder=["Default","EmptyGrid","DenseGalaxy","ZoomedIn","ZoomedOut","FocusedBattle"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  parameters: {\n    docs: {\n      description: {\n        story: 'Default view with mock data loaded from gameStore. Shows Astarte (Alliance) and Odin (Empire) star systems with two fleets.'\n      }\n    }\n  }\n}",...Default.parameters?.docs?.source}}},EmptyGrid.parameters={...EmptyGrid.parameters,docs:{...EmptyGrid.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const StarGridWrapper = () => {\n      const {\n        starSystems,\n        fleets\n      } = useGameStore();\n      useEffect(() => {\n        // Clear mock data for this story\n        useGameStore.setState({\n          starSystems: [],\n          fleets: []\n        });\n        return () => {\n          // Restore on unmount\n          useGameStore.getState().loadMockData();\n        };\n      }, []);\n      return <StarGrid />;\n    };\n    return <StarGridWrapper />;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Empty grid showing only the 100x100 coordinate system without any star systems or fleets.'\n      }\n    }\n  }\n}",...EmptyGrid.parameters?.docs?.source}}},DenseGalaxy.parameters={...DenseGalaxy.parameters,docs:{...DenseGalaxy.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const StarGridWrapper = () => {\n      useEffect(() => {\n        // Load dense mock data\n        useGameStore.setState({\n          starSystems: [{\n            id: 's1',\n            name: 'Astarte',\n            gridX: 5,\n            gridY: 5,\n            faction: 'alliance',\n            planets: []\n          }, {\n            id: 's2',\n            name: 'Odin',\n            gridX: 20,\n            gridY: 20,\n            faction: 'empire',\n            planets: []\n          }, {\n            id: 's3',\n            name: 'Heinessen',\n            gridX: 10,\n            gridY: 8,\n            faction: 'alliance',\n            planets: []\n          }, {\n            id: 's4',\n            name: 'Iserlohn',\n            gridX: 15,\n            gridY: 12,\n            faction: 'alliance',\n            planets: []\n          }, {\n            id: 's5',\n            name: 'Phezzan',\n            gridX: 18,\n            gridY: 10,\n            faction: 'phezzan',\n            planets: []\n          }, {\n            id: 's6',\n            name: 'Fezzan Corridor',\n            gridX: 16,\n            gridY: 11,\n            faction: 'none',\n            planets: []\n          }, {\n            id: 's7',\n            name: 'Vermillion',\n            gridX: 22,\n            gridY: 18,\n            faction: 'empire',\n            planets: []\n          }, {\n            id: 's8',\n            name: 'Dagon',\n            gridX: 12,\n            gridY: 15,\n            faction: 'alliance',\n            planets: []\n          }],\n          fleets: [{\n            id: 'f1',\n            commanderName: 'Yang Wen-li',\n            faction: 'alliance',\n            gridX: 5,\n            gridY: 5,\n            size: 15000,\n            status: 'idle'\n          }, {\n            id: 'f2',\n            commanderName: 'Reinhard',\n            faction: 'empire',\n            gridX: 20,\n            gridY: 20,\n            size: 20000,\n            status: 'idle'\n          }, {\n            id: 'f3',\n            commanderName: 'Merkatz',\n            faction: 'alliance',\n            gridX: 10,\n            gridY: 8,\n            size: 8000,\n            status: 'moving'\n          }, {\n            id: 'f4',\n            commanderName: 'Bittenfeld',\n            faction: 'empire',\n            gridX: 22,\n            gridY: 18,\n            size: 12000,\n            status: 'idle'\n          }, {\n            id: 'f5',\n            commanderName: 'Attenborough',\n            faction: 'alliance',\n            gridX: 15,\n            gridY: 12,\n            size: 5000,\n            status: 'idle'\n          }]\n        });\n        return () => {\n          useGameStore.getState().loadMockData();\n        };\n      }, []);\n      return <StarGrid />;\n    };\n    return <StarGridWrapper />;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Dense galaxy with 8 star systems and 5 fleets. Tests rendering performance and visual clarity.'\n      }\n    }\n  }\n}",...DenseGalaxy.parameters?.docs?.source}}},ZoomedIn.parameters={...ZoomedIn.parameters,docs:{...ZoomedIn.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const StarGridWrapper = () => {\n      useEffect(() => {\n        useGameStore.getState().loadMockData();\n        // Set zoomed viewport\n        useGameStore.setState({\n          viewport: {\n            x: -200,\n            y: -200,\n            zoom: 2.5\n          }\n        });\n        return () => {\n          useGameStore.setState({\n            viewport: {\n              x: 0,\n              y: 0,\n              zoom: 1\n            }\n          });\n        };\n      }, []);\n      return <StarGrid />;\n    };\n    return <StarGridWrapper />;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Zoomed-in view (2.5x) centered on Astarte system. Grid lines and labels should remain clear.'\n      }\n    }\n  }\n}",...ZoomedIn.parameters?.docs?.source}}},ZoomedOut.parameters={...ZoomedOut.parameters,docs:{...ZoomedOut.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const StarGridWrapper = () => {\n      useEffect(() => {\n        useGameStore.getState().loadMockData();\n        // Set zoomed out viewport\n        useGameStore.setState({\n          viewport: {\n            x: 400,\n            y: 400,\n            zoom: 0.3\n          }\n        });\n        return () => {\n          useGameStore.setState({\n            viewport: {\n              x: 0,\n              y: 0,\n              zoom: 1\n            }\n          });\n        };\n      }, []);\n      return <StarGrid />;\n    };\n    return <StarGridWrapper />;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Zoomed-out overview (0.3x) showing larger area of the galaxy. Good for strategic planning.'\n      }\n    }\n  }\n}",...ZoomedOut.parameters?.docs?.source}}},FocusedBattle.parameters={...FocusedBattle.parameters,docs:{...FocusedBattle.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const StarGridWrapper = () => {\n      useEffect(() => {\n        // Show battle scenario near Iserlohn\n        useGameStore.setState({\n          starSystems: [{\n            id: 's1',\n            name: 'Iserlohn',\n            gridX: 15,\n            gridY: 15,\n            faction: 'alliance',\n            planets: []\n          }],\n          fleets: [{\n            id: 'f1',\n            commanderName: 'Yang Wen-li',\n            faction: 'alliance',\n            gridX: 15,\n            gridY: 15,\n            size: 15000,\n            status: 'battle'\n          }, {\n            id: 'f2',\n            commanderName: 'Reinhard',\n            faction: 'empire',\n            gridX: 16,\n            gridY: 15,\n            size: 20000,\n            status: 'battle'\n          }, {\n            id: 'f3',\n            commanderName: 'Merkatz',\n            faction: 'alliance',\n            gridX: 14,\n            gridY: 16,\n            size: 8000,\n            status: 'moving'\n          }],\n          viewport: {\n            x: -600,\n            y: -600,\n            zoom: 2\n          },\n          selectedGrid: {\n            x: 15,\n            y: 15\n          }\n        });\n        return () => {\n          useGameStore.getState().loadMockData();\n          useGameStore.setState({\n            viewport: {\n              x: 0,\n              y: 0,\n              zoom: 1\n            },\n            selectedGrid: null\n          });\n        };\n      }, []);\n      return <StarGrid />;\n    };\n    return <StarGridWrapper />;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Battle scenario at Iserlohn Fortress with fleets in combat. Shows multiple fleets converging on a strategic location.'\n      }\n    }\n  }\n}",...FocusedBattle.parameters?.docs?.source}}}},"./src/stores/gameStore.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>useGameStore});const useGameStore=(0,__webpack_require__("./node_modules/zustand/esm/index.mjs").vt)(set=>({gameState:{year:796,month:1,day:1,hour:12},userProfile:{id:"u1",name:"Yang Wen-li",rank:"Commodore",faction:"alliance",pcp:100,mcp:120,maxPcp:100,maxMcp:150,jobCards:[{id:"c1",title:"13th Fleet Commander",rankReq:"Rear Admiral",commands:["warp","attack","supply"]}]},viewport:{x:0,y:0,zoom:1},selectedGrid:null,selectedObject:null,selectedUnitId:null,starSystems:[],fleets:[],isLoadingGalaxy:!1,galaxyError:null,setViewport:(x,y,zoom)=>set(state=>({viewport:{...state.viewport,x,y,zoom:zoom??state.viewport.zoom}})),selectGrid:(x,y)=>set({selectedGrid:{x,y},selectedObject:null}),selectObject:(type,id)=>set({selectedObject:{type,id}}),selectUnit:id=>set({selectedUnitId:id}),refreshUserProfile:profile=>set({userProfile:profile}),updateCP:(pcpDelta,mcpDelta)=>set(state=>state.userProfile?{userProfile:{...state.userProfile,pcp:Math.max(0,state.userProfile.pcp+pcpDelta),mcp:Math.max(0,state.userProfile.mcp+mcpDelta)}}:state),loadGalaxyData:async sessionId=>{set({isLoadingGalaxy:!0,galaxyError:null});try{const{loghApi}=await __webpack_require__.e(827).then(__webpack_require__.bind(__webpack_require__,"./src/lib/api/logh.ts")),response=await loghApi.getGalaxyViewport(sessionId);if(!response.success||!response.data)throw new Error("Invalid galaxy data response");const data=response.data,starSystems=[];data.cells&&Array.isArray(data.cells)&&data.cells.forEach(cell=>{"star_system"===cell.type&&cell.label&&starSystems.push({id:`sys-${cell.x}-${cell.y}`,name:cell.label,gridX:cell.x,gridY:cell.y,faction:cell.faction||"none",planets:[]})});const fleets=[];data.fleets&&Array.isArray(data.fleets)&&data.fleets.forEach(fleet=>{fleets.push({id:fleet.id,commanderName:fleet.name||"Unknown",faction:fleet.faction||"none",gridX:fleet.x,gridY:fleet.y,size:fleet.cpLoad?.mcp||0,status:fleet.status||"idle"})});const newViewport=data.viewport?{x:data.viewport.x||0,y:data.viewport.y||0,zoom:1}:void 0;set({starSystems,fleets,isLoadingGalaxy:!1,...newViewport&&{viewport:newViewport}})}catch(error){console.error("Failed to load galaxy data:",error),set({galaxyError:error.message||"Failed to load galaxy data",isLoadingGalaxy:!1})}},loadMockData:()=>set({starSystems:[{id:"s1",name:"Astarte",gridX:5,gridY:5,faction:"alliance",planets:[{id:"p1",name:"Astarte IV",type:"planet",population:2e8}]},{id:"s2",name:"Odin",gridX:20,gridY:20,faction:"empire",planets:[{id:"p2",name:"Odin",type:"planet",population:25e8}]}],fleets:[{id:"f1",commanderName:"Yang Wen-li",faction:"alliance",gridX:5,gridY:5,size:15e3,status:"idle"},{id:"f2",commanderName:"Reinhard von Lohengramm",faction:"empire",gridX:6,gridY:5,size:2e4,status:"moving"}]})}));if("undefined"!=typeof window){const globalWindow=window;globalWindow.__OPEN_SAM_STORES__=globalWindow.__OPEN_SAM_STORES__??{},globalWindow.__OPEN_SAM_STORES__.game=useGameStore}}}]);